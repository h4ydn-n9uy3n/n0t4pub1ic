"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./components/ImageGrid.tsx":
/*!**********************************!*\
  !*** ./components/ImageGrid.tsx ***!
  \**********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var sonner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sonner */ \"./node_modules/sonner/dist/index.mjs\");\n\nvar _s = $RefreshSig$();\n\n\nconst MAX_WIDTH = 800;\nconst MAX_HEIGHT = 800;\nconst TARGET_FILE_SIZE = 800 * 1024;\nconst compressImage = async function(dataUrl) {\n    let initialQuality = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0.9;\n    return new Promise((resolve, reject)=>{\n        const img = new Image();\n        img.onload = async ()=>{\n            try {\n                const canvas = document.createElement(\"canvas\");\n                let width = img.width;\n                let height = img.height;\n                // Calculate new dimensions while maintaining aspect ratio\n                if (width > height) {\n                    if (width > MAX_WIDTH) {\n                        height = Math.round(height * MAX_WIDTH / width);\n                        width = MAX_WIDTH;\n                    }\n                } else {\n                    if (height > MAX_HEIGHT) {\n                        width = Math.round(width * MAX_HEIGHT / height);\n                        height = MAX_HEIGHT;\n                    }\n                }\n                canvas.width = width;\n                canvas.height = height;\n                const ctx = canvas.getContext(\"2d\");\n                if (!ctx) {\n                    throw new Error(\"Could not get canvas context\");\n                }\n                // Use better image rendering\n                ctx.imageSmoothingEnabled = true;\n                ctx.imageSmoothingQuality = \"high\";\n                ctx.drawImage(img, 0, 0, width, height);\n                // Progressive compression with higher minimum quality\n                let quality = initialQuality;\n                let compressedDataUrl = canvas.toDataURL(\"image/jpeg\", quality);\n                while(compressedDataUrl.length > TARGET_FILE_SIZE && quality > 0.5){\n                    quality -= 0.1;\n                    compressedDataUrl = canvas.toDataURL(\"image/jpeg\", quality);\n                }\n                // If still too large, try one more time with reduced dimensions\n                if (compressedDataUrl.length > TARGET_FILE_SIZE) {\n                    width = Math.round(width * 0.9);\n                    height = Math.round(height * 0.9);\n                    canvas.width = width;\n                    canvas.height = height;\n                    ctx.imageSmoothingEnabled = true;\n                    ctx.imageSmoothingQuality = \"high\";\n                    ctx.drawImage(img, 0, 0, width, height);\n                    compressedDataUrl = canvas.toDataURL(\"image/jpeg\", quality);\n                }\n                resolve(compressedDataUrl);\n            } catch (error) {\n                console.error(\"Image compression error:\", error);\n                reject(error);\n            }\n        };\n        img.onerror = (error)=>{\n            console.error(\"Image loading error:\", error);\n            reject(new Error(\"Failed to load image\"));\n        };\n        img.src = dataUrl;\n    });\n};\nconst saveToLocalStorage = (key, value)=>{\n    try {\n        // Try to save with compression if needed\n        const compressed = value.length > 1024 * 1024 ? value : value;\n        localStorage.setItem(key, compressed);\n        return true;\n    } catch (error) {\n        console.error(\"localStorage error:\", error);\n        // Try to clear old data if storage is full\n        try {\n            localStorage.removeItem(key);\n            localStorage.setItem(key, value);\n            return true;\n        } catch (retryError) {\n            console.error(\"Failed to save after cleanup:\", retryError);\n            sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error(\"Storage error: Image might be too large\");\n            return false;\n        }\n    }\n};\nconst ImageGrid = (param)=>{\n    let { type, emptySquareColor = \"#FFAFC5\", borderColor = \"#FF8FAB\", textColor = \"#553E4E\" } = param;\n    _s();\n    const [isClient, setIsClient] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [images, setImages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(Array(9).fill(null));\n    const fileInputRefs = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    const [selectedImage, setSelectedImage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [selectedIndex, setSelectedIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        setIsClient(true);\n        try {\n            const savedImages = localStorage.getItem(\"grid-\".concat(type));\n            if (savedImages) {\n                const parsedImages = JSON.parse(savedImages);\n                console.log(\"Loading images for grid \".concat(type, \":\"), parsedImages);\n                setImages(parsedImages);\n            }\n        } catch (error) {\n            console.error(\"Error loading images:\", error);\n        }\n    }, [\n        type\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isClient) {\n            try {\n                console.log(\"Saving images for grid \".concat(type, \":\"), images);\n                const success = saveToLocalStorage(\"grid-\".concat(type), JSON.stringify(images));\n                if (!success) {\n                    console.warn(\"Failed to save images to localStorage\");\n                    // Try to clear other data to make space\n                    try {\n                        for(let i = 1; i <= 3; i++){\n                            if (i !== type) {\n                                localStorage.removeItem(\"grid-\".concat(i));\n                            }\n                        }\n                        // Try saving again\n                        const retrySuccess = saveToLocalStorage(\"grid-\".concat(type), JSON.stringify(images));\n                        if (!retrySuccess) {\n                            console.error(\"Failed to save images even after cleanup\");\n                        }\n                    } catch (error) {\n                        console.error(\"Error during storage cleanup:\", error);\n                    }\n                }\n            } catch (error) {\n                console.error(\"Error saving images:\", error);\n            }\n        }\n    }, [\n        images,\n        type,\n        isClient\n    ]);\n    const handleImageUpload = async (index, event)=>{\n        var _event_target_files;\n        const file = (_event_target_files = event.target.files) === null || _event_target_files === void 0 ? void 0 : _event_target_files[0];\n        if (file) {\n            console.log(\"Loading image:\", file.name, \"Size:\", file.size);\n            try {\n                const loadingToast = sonner__WEBPACK_IMPORTED_MODULE_2__.toast.loading(\"Processing image...\");\n                const reader = new FileReader();\n                reader.onload = async ()=>{\n                    try {\n                        const result = reader.result;\n                        console.log(\"File read successfully, length:\", result.length);\n                        // Create a temporary image to verify loading\n                        const tempImg = new Image();\n                        tempImg.onload = async ()=>{\n                            try {\n                                console.log(\"Image dimensions:\", tempImg.width, \"x\", tempImg.height);\n                                const compressedImage = await compressImage(result);\n                                console.log(\"Compressed image size:\", compressedImage.length);\n                                const newImages = [\n                                    ...images\n                                ];\n                                newImages[index] = compressedImage;\n                                setImages(newImages);\n                                // Verify the image is valid after compression\n                                const verifyImg = new Image();\n                                verifyImg.onload = ()=>{\n                                    console.log(\"Image verified after compression\");\n                                    const success = saveToLocalStorage(\"grid-\".concat(type), JSON.stringify(newImages));\n                                    sonner__WEBPACK_IMPORTED_MODULE_2__.toast.dismiss(loadingToast);\n                                    if (success) {\n                                        sonner__WEBPACK_IMPORTED_MODULE_2__.toast.success(\"Image uploaded successfully\");\n                                    } else {\n                                        sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error(\"Failed to save image. Please try a smaller image.\");\n                                    }\n                                };\n                                verifyImg.onerror = ()=>{\n                                    console.error(\"Failed to verify compressed image\");\n                                    sonner__WEBPACK_IMPORTED_MODULE_2__.toast.dismiss(loadingToast);\n                                    sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error(\"Error processing image. Please try again.\");\n                                };\n                                verifyImg.src = compressedImage;\n                            } catch (error) {\n                                console.error(\"Error during compression:\", error);\n                                sonner__WEBPACK_IMPORTED_MODULE_2__.toast.dismiss(loadingToast);\n                                sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error(\"Error processing image. Please try again.\");\n                            }\n                        };\n                        tempImg.onerror = (error)=>{\n                            console.error(\"Error loading original image:\", error);\n                            sonner__WEBPACK_IMPORTED_MODULE_2__.toast.dismiss(loadingToast);\n                            sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error(\"Error loading image. Please try a different image.\");\n                        };\n                        tempImg.src = result;\n                    } catch (error) {\n                        console.error(\"Error processing image data:\", error);\n                        sonner__WEBPACK_IMPORTED_MODULE_2__.toast.dismiss(loadingToast);\n                        sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error(\"Error processing image. Please try a different image.\");\n                    }\n                };\n                reader.onerror = (error)=>{\n                    console.error(\"Error reading file:\", error);\n                    sonner__WEBPACK_IMPORTED_MODULE_2__.toast.dismiss(loadingToast);\n                    sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error(\"Error reading image file\");\n                };\n                reader.readAsDataURL(file);\n            } catch (error) {\n                console.error(\"Error during upload:\", error);\n                sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error(\"Error uploading image\");\n            }\n        }\n    };\n    const handleSquareClick = (index)=>{\n        if (images[index]) {\n            setSelectedImage(images[index]);\n            setSelectedIndex(index);\n        } else {\n            var _fileInputRefs_current_index;\n            (_fileInputRefs_current_index = fileInputRefs.current[index]) === null || _fileInputRefs_current_index === void 0 ? void 0 : _fileInputRefs_current_index.click();\n        }\n    };\n    const getSquareClassName = (index)=>{\n        const baseClasses = \"\\n      relative rounded-xl overflow-hidden\\n      transform-gpu transition-all duration-[800ms] ease-out\\n      hover:scale-[1.02] cursor-pointer group\\n      border-2\\n      flex items-stretch justify-center\\n    \";\n        // Type 1: Center square is double width\n        if (type === 1) {\n            if (index === 4) {\n                return \"\".concat(baseClasses, \" w-[520px] h-[250px]\");\n            }\n            if (index === 5) {\n                return \"hidden\";\n            }\n        }\n        return \"\".concat(baseClasses, \" w-[250px] h-[250px]\");\n    };\n    const gridClassName = ()=>{\n        if (type === 1) {\n            return \"grid grid-cols-3 gap-[10px] [&>div:nth-child(5)]:col-span-2\";\n        }\n        return \"grid grid-cols-3 gap-[10px]\";\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"mb-8\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"\".concat(gridClassName(), \" max-w-[1200px] mx-auto\"),\n                children: Array.from({\n                    length: 9\n                }).map((_, index)=>{\n                    const image = images[index];\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: getSquareClassName(index),\n                        style: {\n                            borderColor,\n                            minHeight: \"250px\",\n                            display: type === 1 && index === 5 ? \"none\" : \"flex\",\n                            position: \"relative\",\n                            overflow: \"hidden\"\n                        },\n                        onClick: ()=>handleSquareClick(index),\n                        children: [\n                            image ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: image,\n                                alt: \"Grid \".concat(type, \" Image \").concat(index + 1),\n                                className: \"w-full h-full object-cover transform-gpu transition-all duration-[800ms] ease-out group-hover:scale-100\",\n                                style: {\n                                    objectFit: \"cover\",\n                                    width: \"100%\",\n                                    height: \"100%\",\n                                    display: \"block\"\n                                },\n                                onLoad: ()=>console.log(\"Image \".concat(index, \" loaded successfully\")),\n                                onError: (e)=>{\n                                    console.error(\"Error loading image \".concat(index, \":\"), e);\n                                    const target = e.target;\n                                    target.onerror = null;\n                                    // Try to reload the image\n                                    if (image && !image.includes(\"?retry\")) {\n                                        target.src = image + \"?retry=1\";\n                                    } else {\n                                        target.src = \"\";\n                                        sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error(\"Failed to load image \".concat(index + 1));\n                                    }\n                                }\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\hphuc\\\\Desktop\\\\4u\\\\components\\\\ImageGrid.tsx\",\n                                lineNumber: 300,\n                                columnNumber: 17\n                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-full h-full flex items-center justify-center\",\n                                style: {\n                                    backgroundColor: emptySquareColor,\n                                    position: \"absolute\",\n                                    top: 0,\n                                    left: 0,\n                                    zIndex: 0\n                                },\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    style: {\n                                        color: textColor\n                                    },\n                                    className: \"text-lg\",\n                                    children: \"Click to Upload\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\hphuc\\\\Desktop\\\\4u\\\\components\\\\ImageGrid.tsx\",\n                                    lineNumber: 335,\n                                    columnNumber: 19\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\hphuc\\\\Desktop\\\\4u\\\\components\\\\ImageGrid.tsx\",\n                                lineNumber: 325,\n                                columnNumber: 17\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"file\",\n                                ref: (el)=>{\n                                    if (fileInputRefs.current) {\n                                        fileInputRefs.current[index] = el;\n                                    }\n                                },\n                                onChange: (e)=>handleImageUpload(index, e),\n                                accept: \"image/*\",\n                                className: \"hidden\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\hphuc\\\\Desktop\\\\4u\\\\components\\\\ImageGrid.tsx\",\n                                lineNumber: 340,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, index, true, {\n                        fileName: \"C:\\\\Users\\\\hphuc\\\\Desktop\\\\4u\\\\components\\\\ImageGrid.tsx\",\n                        lineNumber: 287,\n                        columnNumber: 13\n                    }, undefined);\n                })\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\hphuc\\\\Desktop\\\\4u\\\\components\\\\ImageGrid.tsx\",\n                lineNumber: 283,\n                columnNumber: 7\n            }, undefined),\n            selectedImage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n                onClick: ()=>{\n                    setSelectedImage(null);\n                    setSelectedIndex(null);\n                },\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"relative max-w-[90vw] max-h-[90vh]\",\n                    onClick: (e)=>e.stopPropagation(),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                            src: selectedImage,\n                            alt: \"Enlarged view\",\n                            className: \"max-w-full max-h-[90vh] object-contain rounded-3xl border-4 cursor-pointer\",\n                            style: {\n                                borderColor\n                            },\n                            onClick: ()=>{\n                                if (selectedIndex !== null) {\n                                    var _fileInputRefs_current_selectedIndex;\n                                    (_fileInputRefs_current_selectedIndex = fileInputRefs.current[selectedIndex]) === null || _fileInputRefs_current_selectedIndex === void 0 ? void 0 : _fileInputRefs_current_selectedIndex.click();\n                                }\n                            }\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\hphuc\\\\Desktop\\\\4u\\\\components\\\\ImageGrid.tsx\",\n                            lineNumber: 366,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            className: \"absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full w-8 h-8 flex items-center justify-center hover:bg-opacity-70 transition-all\",\n                            onClick: ()=>{\n                                setSelectedImage(null);\n                                setSelectedIndex(null);\n                            },\n                            children: \"\\xd7\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\hphuc\\\\Desktop\\\\4u\\\\components\\\\ImageGrid.tsx\",\n                            lineNumber: 377,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\hphuc\\\\Desktop\\\\4u\\\\components\\\\ImageGrid.tsx\",\n                    lineNumber: 365,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\hphuc\\\\Desktop\\\\4u\\\\components\\\\ImageGrid.tsx\",\n                lineNumber: 358,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\hphuc\\\\Desktop\\\\4u\\\\components\\\\ImageGrid.tsx\",\n        lineNumber: 282,\n        columnNumber: 5\n    }, undefined);\n};\n_s(ImageGrid, \"mL8XVepx2G8Mdb6GP40oAt0fumM=\");\n_c = ImageGrid;\n/* harmony default export */ __webpack_exports__[\"default\"] = (ImageGrid);\nvar _c;\n$RefreshReg$(_c, \"ImageGrid\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0gsMkRBQUFBLHFDQUFzQ3FDLEtBQUs7Z0NBQzdDOzRCQUNGOzs7Ozs7c0NBRUYsOERBQUNrQzs0QkFDQzdCLFdBQVU7NEJBQ1ZVLFNBQVM7Z0NBQ1BsRCxpQkFBaUI7Z0NBQ2pCRSxpQkFBaUI7NEJBQ25CO3NDQUNEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFiO0dBOVJNZjtLQUFBQTtBQWdTTiwrREFBZUEsU0FBU0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL0ltYWdlR3JpZC50c3g/ZjI4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gJ3Nvbm5lcic7XG5cbmludGVyZmFjZSBHcmlkUHJvcHMge1xuICB0eXBlOiAxIHwgMiB8IDM7XG4gIGVtcHR5U3F1YXJlQ29sb3I/OiBzdHJpbmc7XG4gIGJvcmRlckNvbG9yPzogc3RyaW5nO1xuICB0ZXh0Q29sb3I/OiBzdHJpbmc7XG59XG5cbmNvbnN0IE1BWF9XSURUSCA9IDgwMDtcbmNvbnN0IE1BWF9IRUlHSFQgPSA4MDA7XG5jb25zdCBUQVJHRVRfRklMRV9TSVpFID0gODAwICogMTAyNDtcblxuY29uc3QgY29tcHJlc3NJbWFnZSA9IGFzeW5jIChkYXRhVXJsOiBzdHJpbmcsIGluaXRpYWxRdWFsaXR5ID0gMC45KTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICBpbWcub25sb2FkID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGxldCB3aWR0aCA9IGltZy53aWR0aDtcbiAgICAgICAgbGV0IGhlaWdodCA9IGltZy5oZWlnaHQ7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIG5ldyBkaW1lbnNpb25zIHdoaWxlIG1haW50YWluaW5nIGFzcGVjdCByYXRpb1xuICAgICAgICBpZiAod2lkdGggPiBoZWlnaHQpIHtcbiAgICAgICAgICBpZiAod2lkdGggPiBNQVhfV0lEVEgpIHtcbiAgICAgICAgICAgIGhlaWdodCA9IE1hdGgucm91bmQoaGVpZ2h0ICogTUFYX1dJRFRIIC8gd2lkdGgpO1xuICAgICAgICAgICAgd2lkdGggPSBNQVhfV0lEVEg7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChoZWlnaHQgPiBNQVhfSEVJR0hUKSB7XG4gICAgICAgICAgICB3aWR0aCA9IE1hdGgucm91bmQod2lkdGggKiBNQVhfSEVJR0hUIC8gaGVpZ2h0KTtcbiAgICAgICAgICAgIGhlaWdodCA9IE1BWF9IRUlHSFQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBpZiAoIWN0eCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGdldCBjYW52YXMgY29udGV4dCcpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBVc2UgYmV0dGVyIGltYWdlIHJlbmRlcmluZ1xuICAgICAgICBjdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgY3R4LmltYWdlU21vb3RoaW5nUXVhbGl0eSA9ICdoaWdoJztcbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgIC8vIFByb2dyZXNzaXZlIGNvbXByZXNzaW9uIHdpdGggaGlnaGVyIG1pbmltdW0gcXVhbGl0eVxuICAgICAgICBsZXQgcXVhbGl0eSA9IGluaXRpYWxRdWFsaXR5O1xuICAgICAgICBsZXQgY29tcHJlc3NlZERhdGFVcmwgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9qcGVnJywgcXVhbGl0eSk7XG4gICAgICAgIFxuICAgICAgICB3aGlsZSAoY29tcHJlc3NlZERhdGFVcmwubGVuZ3RoID4gVEFSR0VUX0ZJTEVfU0laRSAmJiBxdWFsaXR5ID4gMC41KSB7XG4gICAgICAgICAgcXVhbGl0eSAtPSAwLjE7XG4gICAgICAgICAgY29tcHJlc3NlZERhdGFVcmwgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9qcGVnJywgcXVhbGl0eSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBzdGlsbCB0b28gbGFyZ2UsIHRyeSBvbmUgbW9yZSB0aW1lIHdpdGggcmVkdWNlZCBkaW1lbnNpb25zXG4gICAgICAgIGlmIChjb21wcmVzc2VkRGF0YVVybC5sZW5ndGggPiBUQVJHRVRfRklMRV9TSVpFKSB7XG4gICAgICAgICAgd2lkdGggPSBNYXRoLnJvdW5kKHdpZHRoICogMC45KTtcbiAgICAgICAgICBoZWlnaHQgPSBNYXRoLnJvdW5kKGhlaWdodCAqIDAuOSk7XG4gICAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICBjdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICBjdHguaW1hZ2VTbW9vdGhpbmdRdWFsaXR5ID0gJ2hpZ2gnO1xuICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICBjb21wcmVzc2VkRGF0YVVybCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnLCBxdWFsaXR5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc29sdmUoY29tcHJlc3NlZERhdGFVcmwpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignSW1hZ2UgY29tcHJlc3Npb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH07XG4gICAgaW1nLm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ltYWdlIGxvYWRpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcignRmFpbGVkIHRvIGxvYWQgaW1hZ2UnKSk7XG4gICAgfTtcbiAgICBpbWcuc3JjID0gZGF0YVVybDtcbiAgfSk7XG59O1xuXG5jb25zdCBzYXZlVG9Mb2NhbFN0b3JhZ2UgPSAoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBUcnkgdG8gc2F2ZSB3aXRoIGNvbXByZXNzaW9uIGlmIG5lZWRlZFxuICAgIGNvbnN0IGNvbXByZXNzZWQgPSB2YWx1ZS5sZW5ndGggPiAxMDI0ICogMTAyNCA/IHZhbHVlIDogdmFsdWU7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBjb21wcmVzc2VkKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdsb2NhbFN0b3JhZ2UgZXJyb3I6JywgZXJyb3IpO1xuICAgIC8vIFRyeSB0byBjbGVhciBvbGQgZGF0YSBpZiBzdG9yYWdlIGlzIGZ1bGxcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAocmV0cnlFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNhdmUgYWZ0ZXIgY2xlYW51cDonLCByZXRyeUVycm9yKTtcbiAgICAgIHRvYXN0LmVycm9yKCdTdG9yYWdlIGVycm9yOiBJbWFnZSBtaWdodCBiZSB0b28gbGFyZ2UnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn07XG5cbmNvbnN0IEltYWdlR3JpZCA9ICh7IFxuICB0eXBlLCBcbiAgZW1wdHlTcXVhcmVDb2xvciA9ICcjRkZBRkM1JyxcbiAgYm9yZGVyQ29sb3IgPSAnI0ZGOEZBQicsXG4gIHRleHRDb2xvciA9ICcjNTUzRTRFJ1xufTogR3JpZFByb3BzKSA9PiB7XG4gIGNvbnN0IFtpc0NsaWVudCwgc2V0SXNDbGllbnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaW1hZ2VzLCBzZXRJbWFnZXNdID0gdXNlU3RhdGU8KHN0cmluZyB8IG51bGwpW10+KEFycmF5KDkpLmZpbGwobnVsbCkpO1xuICBjb25zdCBmaWxlSW5wdXRSZWZzID0gdXNlUmVmPChIVE1MSW5wdXRFbGVtZW50IHwgbnVsbClbXT4oW10pO1xuICBjb25zdCBbc2VsZWN0ZWRJbWFnZSwgc2V0U2VsZWN0ZWRJbWFnZV0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3NlbGVjdGVkSW5kZXgsIHNldFNlbGVjdGVkSW5kZXhdID0gdXNlU3RhdGU8bnVtYmVyIHwgbnVsbD4obnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRJc0NsaWVudCh0cnVlKTtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2F2ZWRJbWFnZXMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgZ3JpZC0ke3R5cGV9YCk7XG4gICAgICBpZiAoc2F2ZWRJbWFnZXMpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkSW1hZ2VzID0gSlNPTi5wYXJzZShzYXZlZEltYWdlcyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBMb2FkaW5nIGltYWdlcyBmb3IgZ3JpZCAke3R5cGV9OmAsIHBhcnNlZEltYWdlcyk7XG4gICAgICAgIHNldEltYWdlcyhwYXJzZWRJbWFnZXMpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGltYWdlczonLCBlcnJvcik7XG4gICAgfVxuICB9LCBbdHlwZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzQ2xpZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZyhgU2F2aW5nIGltYWdlcyBmb3IgZ3JpZCAke3R5cGV9OmAsIGltYWdlcyk7XG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBzYXZlVG9Mb2NhbFN0b3JhZ2UoYGdyaWQtJHt0eXBlfWAsIEpTT04uc3RyaW5naWZ5KGltYWdlcykpO1xuICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBzYXZlIGltYWdlcyB0byBsb2NhbFN0b3JhZ2UnKTtcbiAgICAgICAgICAvLyBUcnkgdG8gY2xlYXIgb3RoZXIgZGF0YSB0byBtYWtlIHNwYWNlXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDM7IGkrKykge1xuICAgICAgICAgICAgICBpZiAoaSAhPT0gdHlwZSkge1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGBncmlkLSR7aX1gKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVHJ5IHNhdmluZyBhZ2FpblxuICAgICAgICAgICAgY29uc3QgcmV0cnlTdWNjZXNzID0gc2F2ZVRvTG9jYWxTdG9yYWdlKGBncmlkLSR7dHlwZX1gLCBKU09OLnN0cmluZ2lmeShpbWFnZXMpKTtcbiAgICAgICAgICAgIGlmICghcmV0cnlTdWNjZXNzKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGltYWdlcyBldmVuIGFmdGVyIGNsZWFudXAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZHVyaW5nIHN0b3JhZ2UgY2xlYW51cDonLCBlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgaW1hZ2VzOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtpbWFnZXMsIHR5cGUsIGlzQ2xpZW50XSk7XG5cbiAgY29uc3QgaGFuZGxlSW1hZ2VVcGxvYWQgPSBhc3luYyAoaW5kZXg6IG51bWJlciwgZXZlbnQ6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlcz8uWzBdO1xuICAgIGlmIChmaWxlKSB7XG4gICAgICBjb25zb2xlLmxvZygnTG9hZGluZyBpbWFnZTonLCBmaWxlLm5hbWUsICdTaXplOicsIGZpbGUuc2l6ZSk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGxvYWRpbmdUb2FzdCA9IHRvYXN0LmxvYWRpbmcoJ1Byb2Nlc3NpbmcgaW1hZ2UuLi4nKTtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgXG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlYWRlci5yZXN1bHQgYXMgc3RyaW5nO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZpbGUgcmVhZCBzdWNjZXNzZnVsbHksIGxlbmd0aDonLCByZXN1bHQubGVuZ3RoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgdGVtcG9yYXJ5IGltYWdlIHRvIHZlcmlmeSBsb2FkaW5nXG4gICAgICAgICAgICBjb25zdCB0ZW1wSW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICB0ZW1wSW1nLm9ubG9hZCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSW1hZ2UgZGltZW5zaW9uczonLCB0ZW1wSW1nLndpZHRoLCAneCcsIHRlbXBJbWcuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wcmVzc2VkSW1hZ2UgPSBhd2FpdCBjb21wcmVzc0ltYWdlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbXByZXNzZWQgaW1hZ2Ugc2l6ZTonLCBjb21wcmVzc2VkSW1hZ2UubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdJbWFnZXMgPSBbLi4uaW1hZ2VzXTtcbiAgICAgICAgICAgICAgICBuZXdJbWFnZXNbaW5kZXhdID0gY29tcHJlc3NlZEltYWdlO1xuICAgICAgICAgICAgICAgIHNldEltYWdlcyhuZXdJbWFnZXMpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFZlcmlmeSB0aGUgaW1hZ2UgaXMgdmFsaWQgYWZ0ZXIgY29tcHJlc3Npb25cbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJpZnlJbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgICAgICB2ZXJpZnlJbWcub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ltYWdlIHZlcmlmaWVkIGFmdGVyIGNvbXByZXNzaW9uJyk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBzdWNjZXNzID0gc2F2ZVRvTG9jYWxTdG9yYWdlKGBncmlkLSR7dHlwZX1gLCBKU09OLnN0cmluZ2lmeShuZXdJbWFnZXMpKTtcbiAgICAgICAgICAgICAgICAgIHRvYXN0LmRpc21pc3MobG9hZGluZ1RvYXN0KTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3Quc3VjY2VzcygnSW1hZ2UgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdC5lcnJvcignRmFpbGVkIHRvIHNhdmUgaW1hZ2UuIFBsZWFzZSB0cnkgYSBzbWFsbGVyIGltYWdlLicpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmVyaWZ5SW1nLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gdmVyaWZ5IGNvbXByZXNzZWQgaW1hZ2UnKTtcbiAgICAgICAgICAgICAgICAgIHRvYXN0LmRpc21pc3MobG9hZGluZ1RvYXN0KTtcbiAgICAgICAgICAgICAgICAgIHRvYXN0LmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIGltYWdlLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmVyaWZ5SW1nLnNyYyA9IGNvbXByZXNzZWRJbWFnZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkdXJpbmcgY29tcHJlc3Npb246JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRvYXN0LmRpc21pc3MobG9hZGluZ1RvYXN0KTtcbiAgICAgICAgICAgICAgICB0b2FzdC5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBpbWFnZS4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGVtcEltZy5vbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgb3JpZ2luYWwgaW1hZ2U6JywgZXJyb3IpO1xuICAgICAgICAgICAgICB0b2FzdC5kaXNtaXNzKGxvYWRpbmdUb2FzdCk7XG4gICAgICAgICAgICAgIHRvYXN0LmVycm9yKCdFcnJvciBsb2FkaW5nIGltYWdlLiBQbGVhc2UgdHJ5IGEgZGlmZmVyZW50IGltYWdlLicpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGVtcEltZy5zcmMgPSByZXN1bHQ7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgaW1hZ2UgZGF0YTonLCBlcnJvcik7XG4gICAgICAgICAgICB0b2FzdC5kaXNtaXNzKGxvYWRpbmdUb2FzdCk7XG4gICAgICAgICAgICB0b2FzdC5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBpbWFnZS4gUGxlYXNlIHRyeSBhIGRpZmZlcmVudCBpbWFnZS4nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICByZWFkZXIub25lcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlYWRpbmcgZmlsZTonLCBlcnJvcik7XG4gICAgICAgICAgdG9hc3QuZGlzbWlzcyhsb2FkaW5nVG9hc3QpO1xuICAgICAgICAgIHRvYXN0LmVycm9yKCdFcnJvciByZWFkaW5nIGltYWdlIGZpbGUnKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZHVyaW5nIHVwbG9hZDonLCBlcnJvcik7XG4gICAgICAgIHRvYXN0LmVycm9yKCdFcnJvciB1cGxvYWRpbmcgaW1hZ2UnKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU3F1YXJlQ2xpY2sgPSAoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIGlmIChpbWFnZXNbaW5kZXhdKSB7XG4gICAgICBzZXRTZWxlY3RlZEltYWdlKGltYWdlc1tpbmRleF0pO1xuICAgICAgc2V0U2VsZWN0ZWRJbmRleChpbmRleCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpbGVJbnB1dFJlZnMuY3VycmVudFtpbmRleF0/LmNsaWNrKCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGdldFNxdWFyZUNsYXNzTmFtZSA9IChpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgYmFzZUNsYXNzZXMgPSBgXG4gICAgICByZWxhdGl2ZSByb3VuZGVkLXhsIG92ZXJmbG93LWhpZGRlblxuICAgICAgdHJhbnNmb3JtLWdwdSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi1bODAwbXNdIGVhc2Utb3V0XG4gICAgICBob3ZlcjpzY2FsZS1bMS4wMl0gY3Vyc29yLXBvaW50ZXIgZ3JvdXBcbiAgICAgIGJvcmRlci0yXG4gICAgICBmbGV4IGl0ZW1zLXN0cmV0Y2gganVzdGlmeS1jZW50ZXJcbiAgICBgO1xuXG4gICAgLy8gVHlwZSAxOiBDZW50ZXIgc3F1YXJlIGlzIGRvdWJsZSB3aWR0aFxuICAgIGlmICh0eXBlID09PSAxKSB7XG4gICAgICBpZiAoaW5kZXggPT09IDQpIHtcbiAgICAgICAgcmV0dXJuIGAke2Jhc2VDbGFzc2VzfSB3LVs1MjBweF0gaC1bMjUwcHhdYDtcbiAgICAgIH1cbiAgICAgIGlmIChpbmRleCA9PT0gNSkge1xuICAgICAgICByZXR1cm4gJ2hpZGRlbic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGAke2Jhc2VDbGFzc2VzfSB3LVsyNTBweF0gaC1bMjUwcHhdYDtcbiAgfTtcblxuICBjb25zdCBncmlkQ2xhc3NOYW1lID0gKCkgPT4ge1xuICAgIGlmICh0eXBlID09PSAxKSB7XG4gICAgICByZXR1cm4gJ2dyaWQgZ3JpZC1jb2xzLTMgZ2FwLVsxMHB4XSBbJj5kaXY6bnRoLWNoaWxkKDUpXTpjb2wtc3Bhbi0yJztcbiAgICB9XG4gICAgcmV0dXJuICdncmlkIGdyaWQtY29scy0zIGdhcC1bMTBweF0nO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtYi04XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7Z3JpZENsYXNzTmFtZSgpfSBtYXgtdy1bMTIwMHB4XSBteC1hdXRvYH0+XG4gICAgICAgIHtBcnJheS5mcm9tKHsgbGVuZ3RoOiA5IH0pLm1hcCgoXywgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBpbWFnZSA9IGltYWdlc1tpbmRleF07XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtnZXRTcXVhcmVDbGFzc05hbWUoaW5kZXgpfVxuICAgICAgICAgICAgICBzdHlsZT17eyBcbiAgICAgICAgICAgICAgICBib3JkZXJDb2xvcixcbiAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6ICcyNTBweCcsXG4gICAgICAgICAgICAgICAgZGlzcGxheTogdHlwZSA9PT0gMSAmJiBpbmRleCA9PT0gNSA/ICdub25lJyA6ICdmbGV4JyxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbidcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlU3F1YXJlQ2xpY2soaW5kZXgpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7aW1hZ2UgPyAoXG4gICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgc3JjPXtpbWFnZX1cbiAgICAgICAgICAgICAgICAgIGFsdD17YEdyaWQgJHt0eXBlfSBJbWFnZSAke2luZGV4ICsgMX1gfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBvYmplY3QtY292ZXIgdHJhbnNmb3JtLWdwdSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi1bODAwbXNdIGVhc2Utb3V0IGdyb3VwLWhvdmVyOnNjYWxlLTEwMFwiXG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Rml0OiAnY292ZXInLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJ1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIG9uTG9hZD17KCkgPT4gY29uc29sZS5sb2coYEltYWdlICR7aW5kZXh9IGxvYWRlZCBzdWNjZXNzZnVsbHlgKX1cbiAgICAgICAgICAgICAgICAgIG9uRXJyb3I9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGxvYWRpbmcgaW1hZ2UgJHtpbmRleH06YCwgZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5vbmVycm9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IHRvIHJlbG9hZCB0aGUgaW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlICYmICFpbWFnZS5pbmNsdWRlcygnP3JldHJ5JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3JjID0gaW1hZ2UgKyAnP3JldHJ5PTEnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5zcmMgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICB0b2FzdC5lcnJvcihgRmFpbGVkIHRvIGxvYWQgaW1hZ2UgJHtpbmRleCArIDF9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiXG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBlbXB0eVNxdWFyZUNvbG9yLFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgICAgICAgICB6SW5kZXg6IDBcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgY29sb3I6IHRleHRDb2xvciB9fSBjbGFzc05hbWU9XCJ0ZXh0LWxnXCI+XG4gICAgICAgICAgICAgICAgICAgIENsaWNrIHRvIFVwbG9hZFxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgICAgICAgICAgcmVmPXsoZWw6IEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoZmlsZUlucHV0UmVmcy5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVJbnB1dFJlZnMuY3VycmVudFtpbmRleF0gPSBlbDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlSW1hZ2VVcGxvYWQoaW5kZXgsIGUpfVxuICAgICAgICAgICAgICAgIGFjY2VwdD1cImltYWdlLypcIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGRlblwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApO1xuICAgICAgICB9KX1cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogTW9kYWwgZm9yIGVubGFyZ2VkIGltYWdlICovfVxuICAgICAge3NlbGVjdGVkSW1hZ2UgJiYgKFxuICAgICAgICA8ZGl2IFxuICAgICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB6LTUwXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICBzZXRTZWxlY3RlZEltYWdlKG51bGwpO1xuICAgICAgICAgICAgc2V0U2VsZWN0ZWRJbmRleChudWxsKTtcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBtYXgtdy1bOTB2d10gbWF4LWgtWzkwdmhdXCIgb25DbGljaz17ZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfT5cbiAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgc3JjPXtzZWxlY3RlZEltYWdlfVxuICAgICAgICAgICAgICBhbHQ9XCJFbmxhcmdlZCB2aWV3XCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWF4LXctZnVsbCBtYXgtaC1bOTB2aF0gb2JqZWN0LWNvbnRhaW4gcm91bmRlZC0zeGwgYm9yZGVyLTQgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgICBzdHlsZT17eyBib3JkZXJDb2xvciB9fVxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkSW5kZXggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgIGZpbGVJbnB1dFJlZnMuY3VycmVudFtzZWxlY3RlZEluZGV4XT8uY2xpY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtNCByaWdodC00IHRleHQtd2hpdGUgYmctYmxhY2sgYmctb3BhY2l0eS01MCByb3VuZGVkLWZ1bGwgdy04IGgtOCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBob3ZlcjpiZy1vcGFjaXR5LTcwIHRyYW5zaXRpb24tYWxsXCJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkSW1hZ2UobnVsbCk7XG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRJbmRleChudWxsKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgw5dcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBJbWFnZUdyaWQ7Il0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlUmVmIiwidXNlRWZmZWN0IiwidG9hc3QiLCJNQVhfV0lEVEgiLCJNQVhfSEVJR0hUIiwiVEFSR0VUX0ZJTEVfU0laRSIsImNvbXByZXNzSW1hZ2UiLCJkYXRhVXJsIiwiaW5pdGlhbFF1YWxpdHkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImltZyIsIkltYWdlIiwib25sb2FkIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwid2lkdGgiLCJoZWlnaHQiLCJNYXRoIiwicm91bmQiLCJjdHgiLCJnZXRDb250ZXh0IiwiRXJyb3IiLCJpbWFnZVNtb290aGluZ0VuYWJsZWQiLCJpbWFnZVNtb290aGluZ1F1YWxpdHkiLCJkcmF3SW1hZ2UiLCJxdWFsaXR5IiwiY29tcHJlc3NlZERhdGFVcmwiLCJ0b0RhdGFVUkwiLCJsZW5ndGgiLCJlcnJvciIsImNvbnNvbGUiLCJvbmVycm9yIiwic3JjIiwic2F2ZVRvTG9jYWxTdG9yYWdlIiwia2V5IiwidmFsdWUiLCJjb21wcmVzc2VkIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJyZXRyeUVycm9yIiwiSW1hZ2VHcmlkIiwidHlwZSIsImVtcHR5U3F1YXJlQ29sb3IiLCJib3JkZXJDb2xvciIsInRleHRDb2xvciIsImlzQ2xpZW50Iiwic2V0SXNDbGllbnQiLCJpbWFnZXMiLCJzZXRJbWFnZXMiLCJBcnJheSIsImZpbGwiLCJmaWxlSW5wdXRSZWZzIiwic2VsZWN0ZWRJbWFnZSIsInNldFNlbGVjdGVkSW1hZ2UiLCJzZWxlY3RlZEluZGV4Iiwic2V0U2VsZWN0ZWRJbmRleCIsInNhdmVkSW1hZ2VzIiwiZ2V0SXRlbSIsInBhcnNlZEltYWdlcyIsIkpTT04iLCJwYXJzZSIsImxvZyIsInN1Y2Nlc3MiLCJzdHJpbmdpZnkiLCJ3YXJuIiwiaSIsInJldHJ5U3VjY2VzcyIsImhhbmRsZUltYWdlVXBsb2FkIiwiaW5kZXgiLCJldmVudCIsImZpbGUiLCJ0YXJnZXQiLCJmaWxlcyIsIm5hbWUiLCJzaXplIiwibG9hZGluZ1RvYXN0IiwibG9hZGluZyIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJyZXN1bHQiLCJ0ZW1wSW1nIiwiY29tcHJlc3NlZEltYWdlIiwibmV3SW1hZ2VzIiwidmVyaWZ5SW1nIiwiZGlzbWlzcyIsInJlYWRBc0RhdGFVUkwiLCJoYW5kbGVTcXVhcmVDbGljayIsImN1cnJlbnQiLCJjbGljayIsImdldFNxdWFyZUNsYXNzTmFtZSIsImJhc2VDbGFzc2VzIiwiZ3JpZENsYXNzTmFtZSIsImRpdiIsImNsYXNzTmFtZSIsImZyb20iLCJtYXAiLCJfIiwiaW1hZ2UiLCJzdHlsZSIsIm1pbkhlaWdodCIsImRpc3BsYXkiLCJwb3NpdGlvbiIsIm92ZXJmbG93Iiwib25DbGljayIsImFsdCIsIm9iamVjdEZpdCIsIm9uTG9hZCIsIm9uRXJyb3IiLCJlIiwiaW5jbHVkZXMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ0b3AiLCJsZWZ0IiwiekluZGV4Iiwic3BhbiIsImNvbG9yIiwiaW5wdXQiLCJyZWYiLCJlbCIsIm9uQ2hhbmdlIiwiYWNjZXB0Iiwic3RvcFByb3BhZ2F0aW9uIiwiYnV0dG9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/ImageGrid.tsx\n"));

/***/ })

});